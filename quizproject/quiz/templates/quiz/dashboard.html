{% extends 'quiz/base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-3 col-lg-2 d-none d-md-block bg-dark sidebar vh-100 p-3">
            <h4 class="text-white mb-4">Dashboard</h4>
            <ul class="nav flex-column">
                <li class="nav-item mb-2">
                    <a class="nav-link text-white d-flex align-items-center" href="#">
                        <i class="bi bi-house-door-fill me-2"></i> Available Quiz Subjects
                    </a>
                </li>
                <li class="nav-item mb-2">
                    {% if quiz %}
                    <a class="nav-link text-white d-flex align-items-center active-link" href="{% url 'take_quiz' quiz.id %}">
                        <i class="bi bi-graph-up-arrow me-2"></i> View Today's Quiz
                    </a>
                    {% else %}
                    <span class="nav-link text-secondary d-flex align-items-center">
                        <i class="bi bi-graph-up-arrow me-2"></i> No Quiz Available
                    </span>
                    {% endif %}
                </li>
                <li class="nav-item mb-2">
                    <a class="nav-link text-white d-flex align-items-center" href="#">
                        <i class="bi bi-shield-lock-fill me-2"></i> Learning Material
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main content -->
        <main class="col-md-9 col-lg-10 ms-sm-auto px-4">
            {% if quiz %}
            <div class="row mt-3">
                <div class="col-md-12 mb-3">
                    <div class="card shadow-sm p-3 text-center position-relative">
                        {% if quiz.start_at and now < quiz.start_at %}
                            <span class="badge bg-secondary position-absolute" style="top:10px; right:10px;">Not Started</span>
                        {% elif quiz.expire_at and now > quiz.expire_at %}
                            <span class="badge bg-danger position-absolute" style="top:10px; right:10px;">Expired</span>
                        {% else %}
                            <span class="badge bg-success position-absolute" style="top:10px; right:10px;">Active</span>
                        {% endif %}
                        <h3>{{ quiz.title }}</h3>
                        <p>{{ quiz.description }}</p>
                        <a href="{% url 'take_quiz' quiz.id %}" class="btn btn-custom btn-sm mt-2">Take Quiz</a>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="alert alert-secondary mt-3 text-center">
                No quiz available at the moment.
            </div>
            {% endif %}
        </main>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<style>
.card {
    border-radius: 10px;
    transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
.btn-custom {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 0.15rem 0.35rem;
    font-size: 0.75rem;
    min-width: 60px;
    display: inline-block;
    text-align: center;
    line-height: 1.2;
}
.btn-custom:hover {
    background-color: #0056b3;
}
</style>
{% endblock %}
