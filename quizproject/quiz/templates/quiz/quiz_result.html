{% extends 'quiz/base.html' %}
{% block title %}Quiz Result{% endblock %}

{% block content %}
<h2>{{ quiz.title }} - Result</h2>
<p>Your Score: <b>{{ score }}/{{ total }}</b></p>

{% for question in questions %}
    <div class="card mb-2 p-2">
        <p>{{ forloop.counter }}. {{ question.text }}</p>
        {% for choice in question.choices.all %}
            {% if user_answers|get_item:question.id == choice.id and choice.is_correct %}
                <div class="alert alert-success p-2 mb-1">{{ choice.text }} ✔ Correct</div>
            {% elif user_answers|get_item:question.id == choice.id %}
                <div class="alert alert-danger p-2 mb-1">{{ choice.text }} ✖ Incorrect</div>
            {% elif choice.is_correct %}
                <div class="alert alert-success p-2 mb-1">{{ choice.text }} ✔ Correct Answer</div>
            {% else %}
                <div class="p-2 mb-1">{{ choice.text }}</div>
            {% endif %}
        {% endfor %}
    </div>
{% endfor %}

<a href="{% url 'quiz_list' %}" class="btn btn-primary mt-2">Back to Quizzes</a>
{% endblock %}
